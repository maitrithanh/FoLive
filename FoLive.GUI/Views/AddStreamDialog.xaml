<Window x:Class="FoLive.Views.AddStreamDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Add New Stream" 
        Height="700" Width="650"
        WindowStartupLocation="CenterOwner"
        MinHeight="500" MinWidth="600">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Text="Add New Stream" FontSize="20" FontWeight="Bold" Margin="0,0,0,20"/>

        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
        <StackPanel>
            <StackPanel Margin="0,0,0,15">
                <TextBlock Text="Stream ID:" Margin="0,0,0,5"/>
                <TextBox x:Name="StreamIdTextBox" Text="stream1"/>
            </StackPanel>

            <StackPanel Margin="0,0,0,15">
                <TextBlock Text="Source Type:" Margin="0,0,0,5"/>
                <ComboBox x:Name="SourceTypeComboBox" SelectedIndex="0">
                    <ComboBoxItem Content="File"/>
                    <ComboBoxItem Content="YouTube"/>
                    <ComboBoxItem Content="Playlist"/>
                    <ComboBoxItem Content="Facebook"/>
                    <ComboBoxItem Content="URL (yt-dlp supported)"/>
                    <ComboBoxItem Content="Screen"/>
                </ComboBox>
            </StackPanel>

            <StackPanel Margin="0,0,0,15">
                <TextBlock Text="Source (File path or URL):" Margin="0,0,0,5"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBox x:Name="SourceTextBox" Grid.Column="0" Margin="0,0,5,0"/>
                    <Button Content="Browse" Grid.Column="1" Click="BrowseFile_Click" Padding="10,5"/>
                </Grid>
            </StackPanel>

            <StackPanel Margin="0,0,0,15">
                <TextBlock Text="Stream URL:" Margin="0,0,0,5"/>
                <TextBox x:Name="StreamUrlTextBox" Text="rtmp://a.rtmp.youtube.com/live2"/>
            </StackPanel>

            <StackPanel Margin="0,0,0,15">
                <TextBlock Text="Stream Key:" Margin="0,0,0,5"/>
                <TextBox x:Name="StreamKeyTextBox"/>
            </StackPanel>

            <Expander x:Name="AdvancedExpander" Header="Advanced Settings" Margin="0,10,0,0">
                <StackPanel Margin="0,10,0,0">
                    <CheckBox x:Name="LoopCheckBox" Content="Loop video infinitely (24/7)" Margin="0,0,0,10"/>
                    <CheckBox x:Name="UseRenderCheckBox" Content="Use FFmpeg rendering (enable effects)" Margin="0,0,0,10"/>
                    
                    <StackPanel Margin="0,0,0,10">
                        <TextBlock Text="Speed (1.0 = normal, 2.0 = 2x faster):" Margin="0,0,0,5"/>
                        <Slider x:Name="SpeedSlider" Minimum="0.5" Maximum="3.0" Value="1.0" TickFrequency="0.1" IsSnapToTickEnabled="True"/>
                        <TextBlock x:Name="SpeedValueText" Text="1.0x" HorizontalAlignment="Right"/>
                    </StackPanel>

                    <StackPanel Margin="0,0,0,10">
                        <TextBlock Text="Volume (1.0 = 100%):" Margin="0,0,0,5"/>
                        <Slider x:Name="VolumeSlider" Minimum="0.0" Maximum="2.0" Value="1.0" TickFrequency="0.1" IsSnapToTickEnabled="True"/>
                        <TextBlock x:Name="VolumeValueText" Text="100%" HorizontalAlignment="Right"/>
                    </StackPanel>

                    <StackPanel Margin="0,0,0,10">
                        <TextBlock Text="Brightness (-100 to 100):" Margin="0,0,0,5"/>
                        <Slider x:Name="BrightnessSlider" Minimum="-100" Maximum="100" Value="0" TickFrequency="10" IsSnapToTickEnabled="True"/>
                        <TextBlock x:Name="BrightnessValueText" Text="0" HorizontalAlignment="Right"/>
                    </StackPanel>

                    <StackPanel Margin="0,0,0,10">
                        <TextBlock Text="Text Overlay:" Margin="0,0,0,5"/>
                        <TextBox x:Name="TextOverlayTextBox"/>
                    </StackPanel>

                    <StackPanel Margin="0,0,0,10">
                        <TextBlock Text="Intro Video (optional):" Margin="0,0,0,5"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="IntroTextBox" Grid.Column="0" Margin="0,0,5,0"/>
                            <Button Content="Browse" Grid.Column="1" Click="BrowseIntro_Click" Padding="10,5"/>
                        </Grid>
                    </StackPanel>

                    <StackPanel Margin="0,0,0,10">
                        <TextBlock Text="Outro Video (optional):" Margin="0,0,0,5"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="OutroTextBox" Grid.Column="0" Margin="0,0,5,0"/>
                            <Button Content="Browse" Grid.Column="1" Click="BrowseOutro_Click" Padding="10,5"/>
                        </Grid>
                    </StackPanel>

                    <StackPanel Margin="0,0,0,10">
                        <TextBlock Text="Resolution:" Margin="0,0,0,5"/>
                        <ComboBox x:Name="ResolutionComboBox" SelectedIndex="1">
                            <ComboBoxItem Content="1920x1080 (Full HD)"/>
                            <ComboBoxItem Content="1280x720 (HD)"/>
                            <ComboBoxItem Content="854x480 (SD)"/>
                            <ComboBoxItem Content="640x360 (360p)"/>
                            <ComboBoxItem Content="Custom"/>
                        </ComboBox>
                    </StackPanel>

                    <StackPanel x:Name="CustomResolutionPanel" Margin="0,0,0,10" Visibility="Collapsed">
                        <TextBlock Text="Custom Resolution (e.g., 1920x1080):" Margin="0,0,0,5"/>
                        <TextBox x:Name="CustomResolutionTextBox" Text="1920x1080"/>
                    </StackPanel>

                    <StackPanel Margin="0,0,0,10">
                        <TextBlock Text="Bitrate (e.g., 2500k):" Margin="0,0,0,5"/>
                        <TextBox x:Name="BitrateTextBox" Text="2500k"/>
                    </StackPanel>
                </StackPanel>
            </Expander>
        </StackPanel>
        </ScrollViewer>

        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
            <Button Content="Cancel" Click="Cancel_Click" Margin="0,0,10,0" Padding="20,5"/>
            <Button Content="Add" Click="Add_Click" Padding="20,5" IsDefault="True"/>
        </StackPanel>
    </Grid>
</Window>

